{"version":3,"sources":["../src/data_formatter.js"],"names":["moment","DataFormatter","ctrl","kbn","date","minutes","seconds","milliseconds","toISOString","from","formatDate","range","to","thredds","series","filter","i","valueList","dc","timeValues","min","shift","max","pop"],"mappings":";;;;;;;;;;;;;;;AAAOA,Y;;;;;;;;;;;;;;;;;;;;;AAEcC,mB;AACnB,+BAAYC,IAAZ,EAAkBC,GAAlB,EAAuB;AAAA;;AACrB,eAAKD,IAAL,GAAYA,IAAZ;AACA,eAAKC,GAAL,GAAWA,GAAX;AACD;;;;qCAEUC,I,EAAM;AACf,mBAAOJ,OAAOI,IAAP,EAAaC,OAAb,CAAqB,CAArB,EAAwBC,OAAxB,CAAgC,CAAhC,EAAmCC,YAAnC,CAAgD,CAAhD,EAAmDC,WAAnD,EAAP;AACD;;;+CAEoB;AACnB,gBAAMC,OAAO,KAAKC,UAAL,CAAgB,KAAKR,IAAL,CAAUS,KAAV,CAAgBF,IAAhC,CAAb;AACA,gBAAMG,KAAK,KAAKF,UAAL,CAAgB,KAAKR,IAAL,CAAUS,KAAV,CAAgBC,EAAhC,CAAX;AACA,gBAAG,KAAKV,IAAL,CAAUW,OAAb,EAAsB;AACpB,mBAAKX,IAAL,CAAUY,MAAV,GAAmB,KAAKZ,IAAL,CAAUW,OAAV,CAAkBE,MAAlB,CAAyB,UAASC,CAAT,EAAW;AAAC,uBAAOA,KAAGJ,EAAH,IAASI,KAAGP,IAAnB;AAAwB,eAA7D,CAAnB;AACD;AACD,gBAAMQ,YAAY,KAAKf,IAAL,CAAUY,MAA5B;AACA,gBAAMI,KAAK;AACTC,0BAAYF,SADH;AAETG,mBAAKH,UAAUI,KAAV,EAFI;AAGTC,mBAAKL,UAAUM,GAAV;AAHI,aAAX;AAKA;AACA,mBAAOL,EAAP;AACD;;;;;;yBAxBkBjB,a","file":"data_formatter.js","sourcesContent":["import moment from './libs/moment-with-locales';\n\nexport default class DataFormatter {\n  constructor(ctrl, kbn) {\n    this.ctrl = ctrl;\n    this.kbn = kbn;\n  }\n\n  formatDate(date) {\n    return moment(date).minutes(0).seconds(0).milliseconds(0).toISOString();\n  }\n\n  getCharacteristics() {\n    const from = this.formatDate(this.ctrl.range.from)\n    const to = this.formatDate(this.ctrl.range.to)\n    if(this.ctrl.thredds) {\n      this.ctrl.series = this.ctrl.thredds.filter(function(i){return i<=to && i>=from});\n    }\n    const valueList = this.ctrl.series\n    const dc = {\n      timeValues: valueList,\n      min: valueList.shift(),\n      max: valueList.pop(),\n    };\n    // console.log('data characteristics: ', dc);\n    return dc;\n  }\n\n}\n"]}